<section class="chart-search-main">
	<h1
		class="text-2xl"
	>
		CRN Lookup Tool
	</h1>

	<mat-form-field>
		<mat-label>Subject Code Filter</mat-label>
		<input #input
			type="text"
			placeholder="Select Subject Code"
			matInput
			[formControl]="subjectCodeControl"
			[matAutocomplete]="auto"
			(input)="filter()"
			(focus)="filter()"
		>
		<mat-autocomplete
			requireSelection
			#auto="matAutocomplete"
			(optionSelected)="searchCRN($event)"
		>
			<mat-option
				*ngFor="let option of filteredOptions"
				[value]="option"
			>
				{{option}}
			</mat-option>
		</mat-autocomplete>
	</mat-form-field>


	<mat-form-field *ngIf="results.length !== 0">
		<mat-label>CRN Selection</mat-label>
		<input #crnInput
			type="text"
			placeholder="Select Subject Code"
			matInput
			[formControl]="crnControl"
			[matAutocomplete]="auto"
			(input)="filterCRN()"
			(focus)="filterCRN()"
		>
		<mat-autocomplete
			requireSelection
			#auto="matAutocomplete"
			(optionSelected)="crn=$event.option.value"
		>
			<mat-option
				*ngFor="let option of filteredCRNOptions"
				[value]="option"
			>
				{{option}}
			</mat-option>
		</mat-autocomplete>
	</mat-form-field>

	<div class="flex flex-col gap-4">
		<a
			class="block text-blue-500"
			*ngIf="chosenCourse"
			routerLink="/chart/crn/{{chosenCourse.crn}}"
		>
			View Chart for {{chosenCourse.crn}} - {{chosenCourse.subject_code}} {{chosenCourse.subject_number}}
		</a>

		<a
			class="block text-blue-500"
			routerLink="/home"
		>
			Back
		</a>
	</div>
</section>
